{
  "base_model": "microsoft/Phi-3-mini-4k-instruct",
  "dataset_path": "jsonl/processed/train-original.jsonl",
  "validation_path": "jsonl/processed/valid-original.jsonl",
  "test_path": "jsonl/processed/test-original.jsonl",
  "train_ratio": 0.80,
  "valid_ratio": 0.15,
  "test_ratio": 0.05,
  "fine_tune_params": {
    "num_layers": 12,
    "learning_rate": 3e-4,
    "iters": 1500,
    "fine_tune_type": "lora",
    "lora_rank": 96,
    "lora_alpha": 192,
    "lora_dropout": 0.08,
    "batch_size": 6,
    "gradient_accumulation_steps": 8,
    "warmup_steps": 150,
    "weight_decay": 0.02,
    "scheduler": "adaptive_cosine_warmup",
    "max_seq_length": 1536,
    "target_modules": ["q_proj", "k_proj", "v_proj", "o_proj", "gate_proj", "up_proj", "down_proj"],
    "save_strategy": "steps",
    "logging_steps": 30,
    "eval_strategy": "steps",
    "lr_schedule": "adaptive_exploration_exploitation"
  },
  "ollama_model_name": "phi3-mini-presscrafters-qa-advanced",
  "keep_split_data": true,
  "keep_fused_model": true,
  "keep_gguf_files": true,
  "keep_adapter_weights": true,
  "evaluation": {
    "metrics": ["accuracy", "bleu", "rouge", "exact_match", "f1", "perplexity"],
    "eval_steps": 75,
    "save_steps": 150,
    "load_best_model_at_end": true,
    "metric_for_best_model": "f1",
    "early_stopping_patience": 6,
    "early_stopping_threshold": 0.002
  },
  "data_processing": {
    "max_length": 768,
    "truncation": true,
    "padding": "max_length",
    "remove_columns": ["sourceDocument", "chunkIndex", "section", "category", "difficulty"]
  },
  "training_args": {
    "fp16": true,
    "dataloader_pin_memory": false,
    "dataloader_num_workers": 3,
    "group_by_length": true,
    "report_to": "none",
    "run_name": "phi3-mini-presscrafters-qa-advanced",
    "gradient_checkpointing": true,
    "max_grad_norm": 0.8
  },
  "learning_rate_schedule": {
    "type": "adaptive_exploration_exploitation",
    "phases": [
      {
        "name": "exploration",
        "steps": 300,
        "lr_range": [5e-4, 2e-4],
        "strategy": "linear_warmup"
      },
      {
        "name": "exploitation",
        "steps": 900,
        "lr_range": [2e-4, 5e-6],
        "strategy": "cosine_decay"
      },
      {
        "name": "refinement",
        "steps": 300,
        "lr_range": [5e-6, 1e-6],
        "strategy": "exponential_decay"
      }
    ],
    "adaptive_threshold": 0.001,
    "patience_factor": 1.5
  },
  "advanced_training": {
    "curriculum_learning": true,
    "difficulty_sampling": true,
    "dynamic_batch_sizing": true,
    "gradient_clipping": "adaptive",
    "learning_rate_finder": true
  }
}
