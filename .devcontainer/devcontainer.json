// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/javascript-node-postgres
{
  "name": "George AI",
  "dockerComposeFile": "docker-compose.yml",
  "service": "app",
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
  "mounts": ["type=bind,source=${localEnv:HOME}/.ssh,target=/home/node/.ssh,readonly"],
  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss",
        "bierner.markdown-mermaid",
        "github.vscode-github-actions",
        "prisma.prisma",
        "vitest.explorer",
        "astro-build.astro-vscode",
        "unifiedjs.vscode-mdx"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.codeActionsOnSave": {
          "source.fixAll.eslint": "never"
        },
        "eslint.workingDirectories": [{ "mode": "auto" }],
        "remote.autoForwardPorts": true,
        "[typescript]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[typescriptreact]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[mdx]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode",
          "editor.formatOnSave": true
        },
        "files.associations": {
          "*.mdx": "mdx"
        },
        "[prisma]": {
          "editor.defaultFormatter": "Prisma.prisma"
        },
        "files.watcherExclude": {
          "**/node_modules/**": true,
          "**/.uploads/**": true,
          "**/.smb-credentials/**": true,
          "**/.smb-mounts/**": true,
          "**/.crawler-credentials/**": true,
          "**/.postgres-data-chatweb/**": true,
          "**/.postgres-data-keycloak/**": true,
          "**/.typesense-data/**": true
        },
        "files.exclude": {
          "**/.uploads/**": true
        },
        "search.exclude": {
          "**/node_modules": true,
          "**/.turbo": true,
          "**/dist": true,
          "**/.uploads": true,
          "**/.smb-mounts": true,
          "**/.typesense-data": true,
          "**/.postgres-data-chatweb": true,
          "**/.postgres-data-keycloak": true,
          "**/.crawler-credentials": true,
          "**/.smb-credentials": true
        },
        "tailwindCSS.files.exclude": [
          "**/.git/**",
          "**/node_modules/**",
          "**/.hg/**",
          "**/.svn/**",
          "**/.uploads/**",
          "**/.smb-mounts/**",
          "**/.turbo/**",
          "**/.typesense-data/**",
          "**/.postgres-data-*/**"
        ]
      }
    }
  },

  // Features to add to the dev container. More info: https://containers.dev/features.
  "features": {},

  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // This can be used to network with other containers or with the host.
  "forwardPorts": [3000, 3001, 3003, 4321, 8090, 8108, 8180, 11245],

  "postCreateCommand": "pnpm config set global-bin-dir /home/node/.local/bin;pnpm config set store-dir /home/node/.local/share/pnpm/store; pnpm i; curl -fsSL https://claude.ai/install.sh | bash",

  "postStartCommand": "echo 'DevContainer started successfully'"

  // Configure tool-specific properties.
  // "customizations": {},

  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
  // "remoteUser": "root"
}
